---
// src/pages/thoughts/index.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('thoughts');
const sortedPosts = posts.sort((a, b) => 
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---
<BaseLayout>
  <div class="container" style="padding-bottom: 20px">
<div style="margin-bottom:10em;">
                    <h1>Thinking in progress</h1>
</div>
           
      
      {sortedPosts.map((post) => (
        <div style="margin: 3rem 0 0 0; display: grid; grid-template-columns: 40vw repeat(2, 1fr); gap: 1rem; align-items: start;">
          
          <!-- Featured Image -->
          {post.data.featuredImage && (
            <div>
              <img 
                src={post.data.featuredImage} 
                alt={post.data.title}
                style="width: 100%; object-fit: cover;aspect-ratio: 8.5 / 6;"
              />
            </div>
          )}
          
          <!-- Post Content -->
          <div>
            <h3 style="margin-top: 0;">
              <a href={`/thoughts/${post.slug}/`}>{post.data.title}</a>
            </h3>
            <p><em>{post.data.description}</em></p>
            <p><small>Published {new Date(post.data.date).toLocaleDateString()}</small></p>
          </div>
          
        </div>
      ))}
    </div>
  </div>
</BaseLayout>

<style>
  article {
    max-width: 800px;
    margin: 0 auto;
    padding: 4.5rem 2rem 2rem 2rem;
  }
  
  /* Responsive layout for mobile */
  @media (max-width: 768px) {
    article {
      grid-template-columns: 1fr !important;
      gap: 1rem !important;
    }
  }
</style>